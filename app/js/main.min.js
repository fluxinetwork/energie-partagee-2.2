function resize_handler(){}function debouncer(e,t){var i,a;return a=t?t:200,function(){var t=this,s=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(t,Array.prototype.slice.call(s))},a)}}function debouncer_handler(){reloadCurrentPage()}function calc_window(){calc_windowW(),calc_windowH()}function calc_windowW(){windowW=$(window).width()}function calc_windowH(){windowH=$(window).height()}function test_layout(){return calc_windowW(),bpSmall>=windowW?"is-small":windowW>bpSmall&&bpLarge>=windowW?"is-medium":windowW>bpLarge&&bpXlarge>=windowW?"is-marge":windowW>bpXlarge?"is-xlarge":void 0}function disable_links(){$(".js-disable-link").click(function(e){e.preventDefault()})}function disable_titles(){$(".js-disable-title").hover(function(){var e=$(this);e.data("title",e.attr("title")).attr("title","")},function(){var e=$(this);e.attr("title",e.data("title"))})}function loading_img(e,t){function i(e,t){Math.round(stepLoad*(100/s))}function a(){e.removeClass("is-loading")}e.addClass("is-loading");var s=e.find("img").length-1;e.imagesLoaded().progress(i).always(a)}function formatNumber(e){for(var t=e.toFixed(0)+"",i=t.split("."),a=i[0],s=i.length>1?" "+i[1]:"",o=/(\d+)(\d{3})/;o.test(a);)a=a.replace(o,"$1 $2");return a+s}function initSingleMap(){var e=document.getElementById("map"),t=Number($("#map").data("lat")),i=Number($("#map").data("lon")),a=new google.maps.LatLng(t,i),s={lat:t,lng:i},o=$("#map").data("cat");o=o.substring(0,5);var n=$("#map").data("title"),r={zoom:7,scrollwheel:!1,panControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},mapTypeControl:!1,streetViewControl:!1,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP},l=new google.maps.Map(e,r);l.setOptions({styles:stylesMapProjects});var c=new google.maps.Marker({position:s,clickable:!0,map:l,title:n,icon:iconsSelectProjectsMap[o]});markerShadow=new MarkerShadow(c.getPosition(),iconShadow,l),google.maps.event.addListenerOnce(l,"idle",function(){setTimeout(function(){$(".spinner.bg-spin").remove()},300)})}function initProjectsMap(){var e=document.getElementById("map"),t=new google.maps.LatLng(47.5,2.2);activateFilters=!0;var i={zoom:6,scrollwheel:!1,panControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_CENTER},mapTypeControl:!1,streetViewControl:!1,center:t,mapTypeId:google.maps.MapTypeId.ROAD};windowW>=bpSmall?loadGoogleMap(e,i):loadMarkers(map)}function loadGoogleMap(e,t){map=new google.maps.Map(e,t),map.setOptions({styles:stylesMapProjects}),loadMarkers(map)}function loadMarkers(e){if(windowW>=bpSmall)var t="action=get_json_map&category="+filterCat;else var t="action=get_json_map&category="+filterCat+"&posts_per_page=6";return $.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:t,success:function(t){addMakers(e,t)},error:function(e,t,i){console.log(e+" :: "+t+" :: "+i)}}),!1}function addMakers(e,t){nbMakers=Object.keys(t).length,$.each(t,function(i){if("projets"==t[i].postType){var a=t[i].catSlug;if(a=a.substring(0,5),windowW>=bpSmall){var s={lat:Number(t[i].latitude),lng:Number(t[i].longitude)},o=new google.maps.Marker({position:s,map:e,title:t[i].title,icon:iconsProjectsMap[a],category:t[i].catSlug,stade:t[i].stadeSlug});o.addListener("click",function(){onClickMarker(i,e,o,a)}),gmarkers.push(o),i==nbMakers-1&&activateFilters&&(initFilters(e),activateFilters=!1,centerMapOnMarkers(e))}var n='<article class="card-map c-'+a+' anim-out-left"><span class="wrap-card-map">';n+='<header class="card card-project">',n+='<a href="'+t[i].permalink+'">',n+='<div class="card__img" style="background-image:url('+t[i].image+')"><i class="card__icon"></i><div class="spinner"></div><span class="tag is-inactive">'+t[i].stadeName+"</span></div>",n+='<div class="card__infos"><h1 class="card__title">'+t[i].title+'</h1><p class="p-ss">'+t[i].region+"</p></div>",n+="</a>",n+="</header>",n+='<div class="p-details">',n+='<div class="p-details__nrg"><i class="icon-'+t[i].catSlug+'_100"></i></div>',n+='<ul class="p-details__infos">',n+='<li class="p-details__infos__loca"><strong>'+t[i].city+"</strong><span>"+t[i].region+"</span></li>",n+='<li class="p-details__infos__prod"><strong>'+t[i].equiPui+" "+t[i].typeUnit+"</strong><span>"+t[i].prod+" "+t[i].prodUnit+"</span></li>",n+="</ul>",n+='<p class="p-details__equi p-ss">Produit la consommation annuelle de '+t[i].equiPro+" foyers.</p>",n+="</div>",n+='<a class="link-cta" href="'+t[i].permalink+'"><i class="icon-chevronright_32"></i><span>Voir ce projet</span></a>',n+="</span></article>",$(".cards-map").append(n),i==nbMakers-1&&windowW>=bpSmall?($(".js-more-procards").parent().remove(),setTimeout(function(){$(".spinner.bg-spin").remove()},300)):1==i&&bpSmall>=windowW&&($(".spinner.bg-spin").remove(),$(".js-more-procards").parent().removeClass("anim-out"))}})}function onClickMarker(e,t,i,a){markerShadow&&markerShadow.setPosition?(markerShadow.setPosition(i.getPosition()),markerShadow.show()):(markerShadow=new MarkerShadow(i.getPosition(),iconShadow,t),markerShadow.show()),isOpenMarker&&(previousMarker.setIcon(iconsProjectsMap[previousNrj]),previousMarker.setZIndex(1)),i.setIcon(iconsSelectProjectsMap[a]),previousMarker=i,previousNrj=a,i.setZIndex(1e4),e!=prevCardMapId&&(isOpenMarker?($(".cards-map .card-map:eq("+prevCardMapId+")").toggleClass("anim-out-left"),setTimeout(function(){$(".cards-map .card-map:eq("+e+")").toggleClass("anim-out-left"),setTimeout(function(){$(".cards-map .card-map:eq("+e+") .spinner").css("opacity",0)},100)},220)):($(".cards-map .card-map:eq("+e+")").toggleClass("anim-out-left"),setTimeout(function(){$(".cards-map .card-map:eq("+e+") .spinner").css("opacity",0),$(".cards-map .card-map:eq("+e+")").removeClass("unactive")},100))),prevCardMapId=e,isOpenMarker=!0,scrollToMap()}function scrollToMap(){$("body").animate({scrollTop:$(".map-projects").offset().top-56},250)}function initFilters(e){$(".first.map-filters button").click(function(t){resetMarkers();var a=$(this);if(filterCat=a.data("filter"),a.hasClass("js-f-active"))a.toggleClass("js-f-active"),resetNrjFilter();else for($(".first.map-filters .js-f-active").toggleClass("js-f-active"),a.addClass("js-f-active"),i=0;i<gmarkers.length;i++)gmarkers[i].category==filterCat||0===filterCat.length?(gmarkers[i].stade==filterStade||"all_cat"==filterStade)&&gmarkers[i].setVisible(!0):gmarkers[i].setVisible(!1);centerMapOnMarkers(e),scrollToMap()}),$(".second.map-filters button").click(function(t){resetMarkers();var a=$(this);if(filterStade=a.data("filter"),a.hasClass("js-f-active"))a.toggleClass("js-f-active"),resetStadeFilter();else for($(".second.map-filters .js-f-active").toggleClass("js-f-active"),a.addClass("js-f-active"),i=0;i<gmarkers.length;i++)gmarkers[i].stade==filterStade||0===filterStade.length?(gmarkers[i].category==filterCat||"all_cat"==filterCat)&&gmarkers[i].setVisible(!0):gmarkers[i].setVisible(!1);centerMapOnMarkers(e)})}function resetNrjFilter(){for(i=0;i<gmarkers.length;i++)gmarkers[i].category!=filterCat&&(gmarkers[i].stade==filterStade||"all_cat"==filterStade)&&gmarkers[i].setVisible(!0),i==gmarkers.length-1&&(filterCat="all_cat")}function resetStadeFilter(){for(i=0;i<gmarkers.length;i++)gmarkers[i].stade!=filterStade&&(gmarkers[i].category==filterCat||"all_cat"==filterCat)&&gmarkers[i].setVisible(!0),i==gmarkers.length-1&&(filterStade="all_cat")}function resetMarkers(){isOpenMarker&&(previousMarker.setIcon(iconsProjectsMap[previousNrj]),markerShadow.hide(),isOpenMarker=!1,$(".cards-map .card-map:eq("+prevCardMapId+")").toggleClass("anim-out-left"),prevCardMapId=null)}function centerMapOnMarkers(e){nbShowMakers=nbMakers;var t=new Array,a=new google.maps.LatLngBounds;for(i=0;i<gmarkers.length;i++)gmarkers[i].visible?t.push(gmarkers[i].getPosition()):nbShowMakers--;for(var s=0,o=t.length;o>s;s++)a.extend(t[s]);nbShowMakers>=3?e.fitBounds(a):2==nbShowMakers?(e.setZoom(6),e.setCenter(a.getCenter())):1==nbShowMakers&&(e.setZoom(7),e.setCenter(a.getCenter()))}function removeMarkers(){for(i=0;i<gmarkers.length;i++)gmarkers[i].setMap(null)}function reloadCurrentPage(){bpSmall>=lastWindowW&&windowW>=bpSmall&&1==$(".map-projects").length&&(location.reload(!0),lastWindowW=windowW)}function MarkerShadow(e,t,i){this.posn_=e,this.map_=i,"string"==typeof t?this.image=t:(this.options_=t,t.size&&(this.size_=t.size),t.url&&(this.image_=t.url)),this.div_=null,this.setMap(i)}function initContactForm(){function e(){0==$("#submit.is-sending").length&&$.ajax({url:themeURL+"/app/inc/inc_projet/send_contact.php",type:"POST",data:$("form#contact_ep").serialize(),dataType:"json",beforeSend:function(){$("#submit").addClass("is-sending").html('<i class="spinner"></i>')},success:function(e){"yes"==e.resultForm?($("#submit").remove(),notify('<span class="valid-submit-form">Votre message à bien été envoyé. Merci</span>')):($("#submit").removeClass("is-sending").html("Envoyer"),notify('<span class="error-submit-form">Il semble y avoir un problème dans l\'envoie de votre message. Vérifiez si tous les champs requis sont renseignés puis renvoyez le. Si le problème persiste, veuillez nous contacter.</span>'))},error:function(){$("#submit").removeClass("is-sending"),notify('<span class="error-submit-form">Il semble y avoir un problème dans l\'envoie de votre message. Vérifiez si tous les champs requis sont renseignés puis renvoyez le. Si le problème persiste, veuillez nous contacter.</span>')}})}$("#contact_ep").validate({rules:{email:{email:!0},prenom:{required:!0},nom:{required:!0},sujet:{required:!0},message:{required:!0}},messages:{sujet:{required:"Veuillez sélectionner une réponse"}},submitHandler:function(){e()}})}function sendForm(){0==$("#submit.is-sending").length&&$.ajax({url:themeURL+"/app/inc/inc_projet/soumettre_projet.php",type:"POST",data:$("form#soumettre_projet").serialize(),dataType:"json",beforeSend:function(){$(".btns-form #submit").addClass("is-sending").html('<i class="spinner"></i>')},success:function(e){"yes"==e.resultForm?($(".btns-form #submit").remove(),notify('<span class="valid-submit-form">Merci, votre projet vient a été correctement ajouté. Nous vous contacterons prochainement avant de le faire apparaitre sur notre site internet.</span>')):($(".btns-form #submit").removeClass("is-sending").html("Envoyer"),notify('<span class="error-submit-form">Il semble y avoir un problème dans l\'envoie de votre formulaire. Vérifiez si tous les champs requis sont renseignés puis renvoyez le. Si le problème persiste, veuillez nous contacter.</span>'))},error:function(){$("#submit").removeClass("is-sending").html("Envoyer"),notify('<span class="error-submit-form">Il semble y avoir un problème dans l\'envoie de votre formulaire. Vérifiez si tous les champs requis sont renseignés puis renvoyez le. Si le problème persiste, veuillez nous contacter.</span>')}})}function hideShowForm(){""!=stadeProjet&&0!=stadeProjet&&(2==stadeProjet||3==stadeProjet?($(".item-1-6, .item-1-5, .item-1-4, .item-1-3, .item-2-6").removeClass("hide-item"),disableCleaner()):1==stadeProjet?($(".item-1-6, .item-1-5, .item-1-4, .item-1-3").removeClass("hide-item"),$(".item-2-6").addClass("hide-item"),disableCleaner()):4==stadeProjet?($(".item-1-6, .item-1-5, .item-1-4, .item-2-6").removeClass("hide-item"),$(".item-1-3").addClass("hide-item"),disableCleaner()):5==stadeProjet?($(".item-1-6, .item-1-5, .item-2-6").removeClass("hide-item"),$(".item-1-4, .item-1-3").addClass("hide-item"),disableCleaner()):6==stadeProjet?($(".item-1-6, .item-2-6").removeClass("hide-item"),$(".item-1-5, .item-1-4, .item-1-3").addClass("hide-item"),disableCleaner()):$(".item-1-6, .item-1-5, .item-1-4, .item-1-3, .item-2-6").addClass("hide-item")),12!=typeEnergie?($(".type-eco-energ").addClass("sub-hide-item"),$(".type-non-eco-energ").removeClass("sub-hide-item"),$("#puissance_prevue, #unites_production, #objectif_production").removeClass("hide-item").attr("disabled",!1),$("#objectif_economie").addClass("hide-item").attr("disabled",!0).val("")):($(".type-eco-energ").removeClass("sub-hide-item"),$(".type-non-eco-energ").addClass("sub-hide-item"),$("#puissance_prevue, #unites_production, #objectif_production").addClass("hide-item").attr("disabled",!0).val(""),$("#objectif_economie").removeClass("hide-item").attr("disabled",!1)),14==typeEnergie?$("#source_energie_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#source_energie_detail").addClass("sub-hide-item").attr("disabled",!0).val(""),"Autres"!=$("input[name=connu_comment]:checked").val()?$("#connu_autre").addClass("sub-hide-item").attr("disabled",!0).val(""):$("#connu_autre").removeClass("sub-hide-item").attr("disabled",!1),"Autres"!=$("input[name=collectif]:checked").val()?$("#autre_collectif").addClass("sub-hide-item").attr("disabled",!0).val(""):$("#autre_collectif").removeClass("sub-hide-item").attr("disabled",!1),"Autres"==$("input[name=entite_porteuse]:checked").val()?$("#nom_entite_porteuse").removeClass("sub-hide-item").attr("disabled",!1):$("#nom_entite_porteuse").addClass("sub-hide-item").attr("disabled",!0).val(""),"oui"==$("input[name=actions_sensibilisation]:checked").val()?$("#actions_sensibilisation_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#actions_sensibilisation_detail").addClass("sub-hide-item").attr("disabled",!0).val(""),"oui"==$("input[name=dispositions_securisant]:checked").val()?$("#dispositions_securisant_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#dispositions_securisant_detail").addClass("sub-hide-item").attr("disabled",!0).val(""),"oui"==$("input[name=demande_financement]:checked").val()?($("#montant_financement").removeClass("sub-hide-item").attr("disabled",!1),$("#montant_financement_label").removeClass("sub-hide-item")):($("#montant_financement").addClass("sub-hide-item").attr("disabled",!0).val(""),$("#montant_financement_label").addClass("sub-hide-item"))}function disableCleaner(){$("input:text.hide-item, textarea.hide-item").each(function(e){$(this).attr("disabled",!0),$(this).val("")}),$("input:radio.hide-item").each(function(e){$(this).attr("disabled",!0),$(this).prop("checked",!1)}),$("select.hide-item").each(function(e){$(this).attr("disabled",!0)}),$("input:text, textarea, input:radio, select").not(".hide-item").each(function(e){$(this).attr("disabled",!1)})}function initSendMailPorspect(){$("#mailing_prospect button").attr("disabled",!1),$("body").on("submit","form#mailing_prospect",function(e){return e.preventDefault(),$("#mailing_prospect .button-round i").attr("class","spinner"),$.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:$(this).serialize()+"&action=send_mail_prospect",success:function(e){$("#mailing_prospect .button-round i").attr("class","icon-check_64"),$("#mailing_prospect button").attr("disabled",!0),"error"==e[0].validation&&$("#mailing_prospect button").attr("disabled",!1),$(".notify").html('<span class="'+e[0].validation+'">'+e[0].message+"</span>")},error:function(e,t,i){console.log(e+" :: "+t+" :: "+i)}}),!1})}function initLoadMoreProjectsBtn(){$(".js-more-project").attr("disabled",!1),$(".js-more-project").on("click",function(e){e.preventDefault(),$(".js-more-project").attr("disabled",!0).html('<i class="spinner green"></i>'),loadMoreProjects()})}function loadMoreProjects(){offsetProject+=2,limiteProjectLoading++;var e="offset="+offsetProject+"&action=more_project_ajax";return $.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:e,success:function(e){var t;$.each(e,function(i){var a=$(".trio-card .box .box__half:eq(0)"),s=$(".trio-card .box .box__half:eq(1)"),o='<a class="card card-project anim-out '+e[i].classSlug+'" href="'+e[i].permalink+'"><div class="card__img"><img class="img-reponsive" src="'+e[i].image+'"></div><div class="card__infos"><i class="card__icon"></i><h1 class="card__title">'+e[i].title+'</h1><p class="p-ss">'+e[i].region+"</p></div></a>";t=e[i].sourceUrl,i>0?(s.find(".card-project").addClass("anim-out"),setTimeout(function(){s.find(".card-project").remove(),s.append(o),setTimeout(function(){s.find(".card-project").removeClass("anim-out")},50)},220)):(a.find(".card-project").addClass("anim-out"),setTimeout(function(){a.find(".card-project").remove(),a.append(o),setTimeout(function(){a.find(".card-project").removeClass("anim-out")},50)},220))}),2>limiteProjectLoading?$(".js-more-project").attr("disabled",!1).html('<i class="icon-chevronright_64"></i>'):($(".js-more-project").remove(),$(".trio-card .box__fixe").append('<a href="'+t+'" class="button-round grey"><i class="icon-plus_64"></i></a>'))},error:function(e,t,i){$(".js-more-project").attr("disabled",!1).html('<i class="icon-chevronright_64"></i>')}}),!1}function initLoadMoreProjectsCardsBtn(){$(".js-more-procards").attr("disabled",!1),$(".js-more-procards").on("click",function(e){e.preventDefault(),$(".js-more-procards").attr("disabled",!0).html('<i class="spinner"></i>'),loadMoreProjectsCards()})}function loadMoreProjectsCards(){offsetProject+=6;var e=$(".map-projects").data("nbcards"),t="offset="+offsetProject+"&posts_per_page=6&action=more_project_ajax";return $.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:t,success:function(t){$.each(t,function(i){nbloadedCards++;var a=t[i].catSlug.substring(0,5),s='<article class="card-map c-'+a+' anim-out">';s+='<header class="card card-project">',s+='<a href="'+t[i].permalink+'">',s+='<div class="card__img" style="background-image:url('+t[i].image+')"><i class="card__icon"></i><span class="tag is-inactive">'+t[i].stadeName+"</span></div>",s+='<div class="card__infos"><h1 class="card__title">'+t[i].title+'</h1><p class="p-ss">'+t[i].region+"</p></div>",s+="</a>",s+="</header>",s+="</article>",addCardContent("cardmap",s,nbloadedCards-1,i),e-1>nbloadedCards?$(".js-more-procards").attr("disabled",!1).html("Charger plus"):$(".js-more-procards").parent().hide(300)})},error:function(e,t,i){console.log(e+" :: "+t+" :: "+i)}}),!1}function initLoadMorePostsBtn(){$(".js-more").attr("disabled",!1),$(".js-more").on("click",function(e){e.preventDefault(),$(".js-more").attr("disabled",!0);var t=$(this).data("cat");loadPosts(t)})}function loadPosts(e){var t=$(".fluxi-content").data("totalposts"),i="&cat="+e+"&offset="+offsetPost+"&ppp="+ppp+"&action=more_post_ajax";return $.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:i,beforeSend:function(){$(".js-more").html('<i class="spinner"></i>')},success:function(e){var i=$(e);0!=i.length?($(".js-more").attr("disabled",!1),$(".js-more").html("Charger plus"),$.each(e,function(i){var a='<a class="card-news anim-out" href="'+e[i].permalink+'">';a+='<div class="card__img"><img class="img-responsive" src="'+e[i].img+'" alt="'+e[i].title+'"></div>',a+='<div class="card__infos">',a+='<span class="tag is-inactive">'+e[i].date+"</span>",a+='<h1 class="card__title">'+e[i].title+"</h1>",a+="</div>",a+="</a>",addCardContent("posts",a,offsetPost,i),offsetPost++,offsetPost>=t&&$(".js-more").attr("disabled",!0).remove()})):$(".js-more").attr("disabled",!0).remove()},error:function(e,t,i){console.log(e+" :: "+t+" :: "+i)}}),!1}function addCardContent(e,t,i,a){"cardmap"==e?($(".cards-map").append(t),setTimeout(function(){$(".cards-map").find(".card-map:eq("+i+")").removeClass("anim-out")},200*a)):($(".js-inject-news").append(t),setTimeout(function(){$(".card-news:eq("+(i-2)+")").removeClass("anim-out")},200*a))}function pp_nav(){function e(){var e=0;$(".hamburger").hasClass("is-visible")&&(e=50),t=$(".nav__primary").innerWidth()+$(".nav__secondary").width(),navbarPd=2*$(".navbar").css("padding-left").replace("px",""),i=windowW-logoW-buttonsW-navbarPd-e,a=i-t}calc_windowW();var t,i,a;if(e(),nbNavItems>activeItems?$(".hamburger").addClass("is-visible"):($(".hamburger").removeClass("is-visible pp-visible"),$(".pp").removeClass("is-visible")),t>i){if($(".nav__secondary .nav__item").length>0)var s=$(".nav__secondary").children().last();else var s=$(".nav__primary").children().last();ppItemsW.push(s.outerWidth()),s.removeClass("is-active").prependTo(".pp").on("click",clicPPnavItem).off("click",clicNavItem),clicPPnavItem(),activeItems--}else if(ppItemsW.length>0&&a>ppItemsW[ppItemsW.length-1]){var s=$(".pp .nav__item").first();$(".nav__primary .nav__item").length==nbNavItemsNav1?s.first().appendTo(".nav__secondary"):s.first().appendTo(".nav__primary"),s.removeClass("is-unfold").off("click",clicPPnavItem).on("click",clicNavItem),ppItemsW.pop(),activeItems++}}function toggleSearch(){if($(".navbar").hasClass("is-search")){$(".navbar").removeClass("is-search");for(var e=0;nbNavItems>e;e++)pp_nav()}else $(".navbar").addClass("is-search"),setTimeout(function(){$(".nav__search__input").focus()},1),$(".js-toggle-pp").removeClass("pp-visible"),$(".pp").removeClass("is-visible"),$(".no-pp .is-active").removeClass("is-active"),$(".pp .is-unfold").removeClass("is-unfold")}function clicNavItem(e){$(e.target).hasClass("nav__item__title")&&($(this).hasClass("is-active")?clearMenu():(clearMenu(),$(this).toggleClass("is-active"),$(".pp").removeClass("is-visible"),$(".js-toggle-pp").removeClass("pp-visible"),$(".navbar__id").addClass("is-compact")))}function clicPPnavItem(){$(".pp .is-unfold").removeClass("is-unfold"),$(this).addClass("is-unfold")}function clearMenu(){$(".no-pp .is-active").removeClass("is-active"),$(".pp .is-unfold").removeClass("is-unfold"),$(".navbar").hasClass("stick-top")||$(".navbar__id").removeClass("is-compact")}var siteURL="",isHome=!1,themeURL="/wp-content/themes/energie-partagee-2",resizeEvent=!0,resizeDebouncer=!0,windowH,windowW;calc_window();var lastWindowW=windowW,bpSmall=600,bpMedium=830,bpLarge=1e3,bpXlarge=1200,ppp=12,offsetPost=12,offsetProject=1,limiteProjectLoading=0,nbMakers=0,nbShowMakers=0,nbloadedCards=6,gmarkers=[],activateFilters=!1,filterCat="all_cat",filterStade="all_cat",map,prevCardMapId,previousMarker,previousNrj,isOpenMarker=!1,stylesMapProjects=[{featureType:"landscape.natural.terrain",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"simplified"},{hue:"#0500ff"},{saturation:"-100"},{lightness:"45"}]},{featureType:"water",elementType:"all",stylers:[{hue:"#007bff"},{visibility:"on"},{lightness:"-9"}]}],markerShadow,iconShadow={url:themeURL+"/app/img/marker-shadow.png",size:new google.maps.Size(38,38),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(34,34)},iconsSelectProjectsMap={eolie:{path:google.maps.SymbolPath.CIRCLE,scale:20,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:8,fillColor:"#5ab1bb",fillOpacity:1},bioma:{path:google.maps.SymbolPath.CIRCLE,scale:20,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:8,fillColor:"#83ab00",fillOpacity:1},solai:{path:google.maps.SymbolPath.CIRCLE,scale:20,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:8,fillColor:"#e9af00",fillOpacity:1},micro:{path:google.maps.SymbolPath.CIRCLE,scale:20,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:8,fillColor:"#5268b9",fillOpacity:1},geoth:{path:google.maps.SymbolPath.CIRCLE,scale:20,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:8,fillColor:"#e7511e",fillOpacity:1},econo:{path:google.maps.SymbolPath.CIRCLE,scale:20,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:8,fillColor:"#b7115b",fillOpacity:1}},iconsProjectsMap={eolie:{path:google.maps.SymbolPath.CIRCLE,scale:12,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#5ab1bb",fillOpacity:1},bioma:{path:google.maps.SymbolPath.CIRCLE,scale:12,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#83ab00",fillOpacity:1},solai:{path:google.maps.SymbolPath.CIRCLE,scale:12,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#e9af00",fillOpacity:1},micro:{path:google.maps.SymbolPath.CIRCLE,scale:12,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#5268b9",fillOpacity:1},geoth:{path:google.maps.SymbolPath.CIRCLE,scale:12,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#e7511e",fillOpacity:1},econo:{path:google.maps.SymbolPath.CIRCLE,scale:12,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#b7115b",fillOpacity:1}},oldOuterWidth=$.fn.outerWidth;$.fn.outerWidth=function(){return oldOuterWidth.apply(this,[!0])},$(window).load(function(){});var FOO={common:{init:function(){for(var e=0;nbNavItems>e;e++)pp_nav();setTimeout(function(){$(".nav").removeClass("is-hidden")},1),$(".lightvideo").lightGallery(),$(".no-touch .wrap-anim").length&&$(".wrap-anim").waypoint(function(){$(this.element).toggleClass("ready-anim")},{offset:"85%"}),$("html").hasClass("detect_no-flexbox")&&$(".warning-flexbox").addClass("show-me"),$(".fitvids").length&&$(".fitvids").fitVids()}},home:{init:function(){isHome=!0,$("body").hasClass("touch")?$(".key-nums__item__num").each(function(){$(this).html($(this).attr("data-number"))}):$(".key-nums__item__num").each(function(){var e=$(this),t=($(this).next(),$(this).attr("data-number")),i=t>1e3?3e3:100*t;$(this).jQuerySimpleCounter({start:0,end:t,duration:i,complete:function(){e.html(t)}})}),initLoadMoreProjectsBtn()}},single:{init:function(){$(".fitvids").fitVids()}},single_projets:{init:function(){initSingleMap(),initSendMailPorspect(),$(".repartition").length&&$(".repartition .infosbloc li .data-capital").each(function(e){$(this).html(formatNumber($(this).data("capital"))+" €")}),$(".touch .map-holder").on("click",function(){$(this).addClass("is-active")}),$(".following .box__btn").clone().appendTo(".following--clone .wrap"),$(".following").waypoint(function(e){"down"==e?$(".following--clone").removeClass("slide-down").addClass("slide-up"):$(".following--clone").removeClass("slide-up").addClass("slide-down")}),$(".footer").waypoint(function(){$(".following--clone").toggleClass("slide-down")},{offset:"100%"}),$(".js-open-follow").on("click",function(){$("html, body").animate({scrollTop:$(".description").offset().top-50},250),$(".wrap-bg.c-main").toggleClass("is-active")})}},page:{init:function(){initLoadMorePostsBtn(),$(".suggestion").length&&$(".fluxi-wrap").addClass("has-suggestion")}},page_template_page_projets:{init:function(){initProjectsMap(),initLoadMoreProjectsCardsBtn()}},category:{init:function(){initLoadMorePostsBtn()}},contact:{init:function(){initContactForm(),$(".clikarde__item").each(function(e){var t,i=$(this).find(".minicard").attr("href");i.indexOf("@")>-1&&(t=i.substring(7),$(this).find(".minicard").attr("href","mailto:"+t))})}},search:{init:function(){if($(".nav__search__input").focus(),void 0!=window.location.href.split("&")[1]){var e=window.location.href.split("&")[1],t=e.substring(4);$("#search-filters #filter option[value="+t+"]").attr("selected","selected")}$("#search-filters").change(function(){var e,t=$("#search-filters #filter option:selected").val();e=$.isNumeric(t)?"cat":"cpt";var i=window.location.href.split("&")[0];location.href=i+"&"+e+"="+t}),calc_windowH(),windowH<$(".footer").offset().top&&($("#search-filters").waypoint(function(){$(this.element).toggleClass("is-fixed")}),$(".footer").waypoint(function(){$("#search-filters").toggleClass("is-fixed")},{offset:"100%"}))}}},UTIL={fire:function(e,t,i){var a=FOO;t=void 0===t?"init":t,""!==e&&a[e]&&"function"==typeof a[e][t]&&a[e][t](i)},loadEvents:function(){UTIL.fire("common"),$.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(e,t){UTIL.fire(t)})}};$(document).ready(UTIL.loadEvents),resizeEvent&&$(window).bind("resize",resize_handler()),resizeDebouncer&&$(window).bind("resize",debouncer(debouncer_handler));var notify=function(e){var t;t=$("body").hasClass("single-projets")?$('<div class="bullet-points bullet-points--white"><span></span></div><p class="notif-form" style="display:none;">'+e+"</p>"):$('<p class="notif-form" style="display:none;">'+e+"</p>"),$(".notification").append(t),t.slideDown(300,function(){$("body").hasClass("single-projets")||$("body").hasClass("page-id-3224")||window.setTimeout(function(){t.slideUp(300,function(){t.remove()})},1e4)})},popupCenter=function(e,t,i,a){var s=i||640,o=a||320,n=window.screenLeft||window.screenX,r=window.screenTop||window.screenY,l=window.innerWidth||document.documentElement.clientWidth,c=window.innerHeight||document.documentElement.clientHeight,d=n+l/2-s/2,p=r+c/2-o/2,m=window.open(e,t,"scrollbars=yes, width="+s+", height="+o+", top="+p+", left="+d);return m.focus(),!0};$(".js-share").on("click",function(e){e.preventDefault();var t,i=$(this).attr("data-network"),a=$(this).attr("data-url");if("facebook"==i&&(t="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a),popupCenter(t,"Partager sur Facebook")),"twitter"==i){var s="energiepartagee";t="https://twitter.com/intent/tweet?text="+encodeURIComponent(document.title)+"&via="+s+"&url="+encodeURIComponent(a),popupCenter(t,"Partager sur Twitter")}}),$.fn.jQuerySimpleCounter=function(e){var t=$.extend({start:0,end:100,easing:"swing",duration:400,complete:""},e),i=$(this);$({count:t.start}).animate({count:t.end},{duration:t.duration,easing:t.easing,step:function(){var e=Math.ceil(this.count);i.text(e)},complete:t.complete})},MarkerShadow.prototype=new google.maps.OverlayView,MarkerShadow.prototype.setPosition=function(e){this.posn_=e,this.draw()},MarkerShadow.prototype.onAdd=function(){if(this.image_){var e=document.createElement("div");e.style.borderStyle="none",e.style.borderWidth="0px",e.style.position="absolute";var t=document.createElement("img");t.src=this.image_,t.style.width=this.options_.size.x+"px",t.style.height=this.options_.size.y+"px",t.style.position="absolute",e.appendChild(t),this.div_=e;var i=this.getPanes();i.overlayShadow.appendChild(e)}},MarkerShadow.prototype.draw=function(){if(this.image_){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.posn_);if(this.div_){var i=this.div_;this.options_.anchor&&(i.style.left=Math.floor(t.x-this.options_.anchor.x)+"px",i.style.top=Math.floor(t.y-this.options_.anchor.y)+"px"),this.options_.size&&(i.style.width=this.size_.x+"px",i.style.height=this.size_.y+"px")}}},MarkerShadow.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},MarkerShadow.prototype.hide=function(){this.div_&&(this.div_.style.visibility="hidden")},MarkerShadow.prototype.show=function(){this.div_&&(this.div_.style.visibility="visible")},$(".galerie_damier").length&&$(".galerie_damier").lightGallery({thumbnail:!1,thumbMargin:0,thumbContHeight:90}),$("ul.galerie_vignettes").length&&$("ul.galerie_vignettes").lightSlider({gallery:!0,item:1,loop:!1,thumbItem:9,slideMargin:0,enableDrag:!1,adaptiveHeight:!0,currentPagerPosition:"middle",onSliderLoad:function(e){e.lightGallery({selector:".galerie_vignettes .lslide"})}}),$("ul.galerie_slider").length&&$("ul.galerie_slider").lightSlider({gallery:!1,pager:!0,loop:!1,item:1,adaptiveHeight:!0,slideMargin:0,loop:!0}),$(".accordion").length&&$(".accordion .accordion__head").click(function(e){$(this).parent().toggleClass("open").find(".accordion__content").slideToggle()}),$(".lightbox").length&&$(".lightbox").lightGallery({selector:"this"}),$(".main-isogrid").length&&($(".main-isogrid").each(function(e){var t=$(".main-isogrid"),i=t.isotope({itemSelector:".item",layoutMode:"masonry",transitionDuration:"0.5s",hiddenStyle:{opacity:0},visibleStyle:{opacity:1}});$(".button-group-sort").on("click","button",function(){var e=$(this).attr("data-filter");i.isotope({filter:e})})}),$(".main-isogrid a[href$='.pdf'] .icon-doc").addClass("js-icon-pdf"),$(".main-isogrid a[href$='.zip'] .icon-doc, .docs a[href$='.rar'] .icon-doc").addClass("js-icon-zip"),$(".main-isogrid a[href$='.odt'] .icon-doc").addClass("js-icon-odt"),$(".main-isogrid a[href$='.doc'] .icon-doc, .docs a[href$='.docx'] .icon-doc").addClass("js-icon-word"),$(".main-isogrid a[href$='.xls'] .icon-doc, .docs a[href$='.xlsx'] .icon-doc, .main-isogrid a[href$='.xlt'] .icon-doc, .main-isogrid a[href$='.xltx'] .icon-doc").addClass("js-icon-exel"));var typeEnergie,stadeProjet;
if($("#soumettre_projet").length>0){var TODAY=new Date(2013,3,20,10,30);$("#mise_en_service").pickadate({monthsFull:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],today:"aujourd'hui",clear:"effacer",formatSubmit:"dd/mm/yy",close:"Fermer"});var messageRadio="Veuillez sélectionner une réponse";$("#soumettre_projet").validate({rules:{email_contact:{required:!0,email:!0},connu_comment:{required:!0},collectif:{required:!0},stade_projet:{required:!0},entite_porteuse:{required:!0},projet_formalise:{required:!0},actions_sensibilisation:{required:!0},dispositions_securisant:{required:!0},montant_financement:{required:!0},projet_visible:{required:!0},code_postal:{required:!0,number:!0},code_postal_contact:{number:!0},tel_1_contact:{required:!0,digits:!0},tel_2_contact:{digits:!0},puissance_prevue:{required:!0,number:!0},unites_production:{required:!0,number:!0},objectif_production:{number:!0},montant_investissement:{required:!0,number:!0},montant_financement:{number:!0,range:[5e4,5e5]},fonds_disponibles:{number:!0},part_endettement:{number:!0,max:100},site_web_projet:{url:!0}},messages:{connu_comment:{required:messageRadio},collectif:{required:messageRadio},stade_projet:{required:messageRadio},entite_porteuse:{required:messageRadio},projet_formalise:{required:messageRadio},actions_sensibilisation:{required:messageRadio},dispositions_securisant:{required:messageRadio},montant_financement:{required:messageRadio},projet_visible:{required:messageRadio}},submitHandler:function(){sendForm()}}),typeEnergie=$("#source_energie").val(),stadeProjet=$("input[name=stade_projet]").index($("input[name=stade_projet]:checked"))+1,hideShowForm(),$("#source_energie").change(function(){typeEnergie=$(this).val(),14==typeEnergie?$("#source_energie_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#source_energie_detail").addClass("sub-hide-item").attr("disabled",!0).val(""),hideShowForm()}),$("input[name=stade_projet]").change(function(){stadeProjet=$("input[name=stade_projet]").index(this),stadeProjet+=1,hideShowForm()}),$("input[name=connu_comment]").change(function(){"Autres"==$("input[name=connu_comment]:checked").val()?$("#connu_autre").removeClass("sub-hide-item").attr("disabled",!1):$("#connu_autre").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=collectif]").change(function(){"Autres"==$("input[name=collectif]:checked").val()?$("#autre_collectif").removeClass("sub-hide-item").attr("disabled",!1):$("#autre_collectif").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=entite_porteuse]").change(function(){"oui"==$("input[name=entite_porteuse]:checked").val()?$("#nom_entite_porteuse").removeClass("sub-hide-item").attr("disabled",!1):$("#nom_entite_porteuse").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=actions_sensibilisation]").change(function(){"oui"==$("input[name=actions_sensibilisation]:checked").val()?$("#actions_sensibilisation_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#actions_sensibilisation_detail").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=dispositions_securisant]").change(function(){"oui"==$("input[name=dispositions_securisant]:checked").val()?$("#dispositions_securisant_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#dispositions_securisant_detail").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=demande_financement]").change(function(){"oui"==$("input[name=demande_financement]:checked").val()?($("#montant_financement").removeClass("sub-hide-item").attr("disabled",!1),$("#montant_financement_label").removeClass("sub-hide-item")):($("#montant_financement").addClass("sub-hide-item").attr("disabled",!0).val(""),$("#montant_financement_label").addClass("sub-hide-item"))})}var ppItemsW=new Array,logoW=$(".navbar__id").outerWidth(),buttonsW=$(".navbar__buttons").outerWidth(),nbNavItems=$(".nav__item").length,activeItems=nbNavItems,nbNavItemsNav1=$(".nav__primary .nav__item").length,nbNavItemsNav2=$(".nav__secondary .nav__item").length;$(window).on("resize",function(){pp_nav()}),$(".current_page_item").parent().parent().prev().addClass("is-active"),$(".js-toggle-search").on("click",toggleSearch),$("body").hasClass("touch")&&($(".js-toggle-pp").click(function(){clearMenu(),$(".pp").hasClass("is-visible")||$(".navbar__id").addClass("is-compact"),$(this).toggleClass("pp-visible"),$(".pp").toggleClass("is-visible")}),$(".no-pp .nav__item").on("click",clicNavItem));var timerOff;$(".js-choose-connexion, .js-close-connect").on("click",function(e){e.preventDefault(),clearTimeout(timerOff),$(".connexion div").addClass("is-active")}),$(".js-close-connect").on("click",function(){$(".connexion div").removeClass("is-active"),$(".connexion div span").addClass("is-off"),timerOff=setTimeout(function(){$(".connexion div span").removeClass("is-off")},300)}),$(".top-display").waypoint(function(){$(".navbar, .navbar__id").toggleClass("is-compact")},{offset:"-1px"});