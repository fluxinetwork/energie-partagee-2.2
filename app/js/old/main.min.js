function resize_handler(){}function debouncer(a,b){var c,d;return d=b?b:200,function(){var b=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(b,Array.prototype.slice.call(e))},d)}}function debouncer_handler(){reloadCurrentPage()}function calc_window(){calc_windowW(),calc_windowH()}function calc_windowW(){windowW=$(window).width()}function calc_windowH(){windowH=$(window).height()}function test_layout(){return calc_windowW(),bpSmall>=windowW?"is-small":windowW>bpSmall&&bpLarge>=windowW?"is-medium":windowW>bpLarge&&bpXlarge>=windowW?"is-marge":windowW>bpXlarge?"is-xlarge":void 0}function disable_links(){$(".js-disable-link").click(function(a){a.preventDefault()})}function disable_titles(){$(".js-disable-title").hover(function(){var a=$(this);a.data("title",a.attr("title")).attr("title","")},function(){var a=$(this);a.attr("title",a.data("title"))})}function loading_img(a,b){function c(a,b){Math.round(stepLoad*(100/e))}function d(){a.removeClass("is-loading")}a.addClass("is-loading");var e=a.find("img").length-1;a.imagesLoaded().progress(c).always(d)}function initSingleMap(){var a=document.getElementById("map"),b=Number($("#map").data("lat")),c=Number($("#map").data("lon")),d=new google.maps.LatLng(b,c),e={lat:b,lng:c},f=$("#map").data("cat");f=f.substring(0,5);var g=$("#map").data("title"),h={zoom:7,scrollwheel:!1,panControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},mapTypeControl:!1,streetViewControl:!1,center:d,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(a,h);i.setOptions({styles:stylesMapProjects});var j=new google.maps.Marker({position:e,clickable:!0,map:i,title:g,icon:iconsSelectProjectsMap[f]});markerShadow=new MarkerShadow(j.getPosition(),iconShadow,i),google.maps.event.addListenerOnce(i,"idle",function(){setTimeout(function(){$(".spinner.bg-spin").remove()},300)})}function initProjectsMap(){var a=document.getElementById("map"),b=new google.maps.LatLng(47.5,2.2);activateFilters=!0;var c={zoom:6,scrollwheel:!1,panControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_CENTER},mapTypeControl:!1,streetViewControl:!1,center:b,mapTypeId:google.maps.MapTypeId.ROAD};windowW>=bpSmall?loadGoogleMap(a,c):loadMarkers(map)}function loadGoogleMap(a,b){map=new google.maps.Map(a,b),map.setOptions({styles:stylesMapProjects}),loadMarkers(map)}function loadMarkers(a){if(windowW>=bpSmall)var b="action=get_json_map&category="+filterCat;else var b="action=get_json_map&category="+filterCat+"&posts_per_page=6";return $.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:b,success:function(b){addMakers(a,b)},error:function(a,b,c){console.log(a+" :: "+b+" :: "+c)}}),!1}function addMakers(a,b){nbMakers=Object.keys(b).length,$.each(b,function(c){if("projets"==b[c].postType){var d=b[c].catSlug;if(d=d.substring(0,5),windowW>=bpSmall){var e={lat:Number(b[c].latitude),lng:Number(b[c].longitude)},f=new google.maps.Marker({position:e,map:a,title:b[c].title,icon:iconsProjectsMap[d],category:b[c].catSlug,stade:b[c].stadeSlug});f.addListener("click",function(){onClickMarker(c,a,f,d)}),gmarkers.push(f),c==nbMakers-1&&activateFilters&&(initFilters(a),activateFilters=!1,centerMapOnMarkers(a))}var g='<article class="card-map c-'+d+' anim-out-left">';g+='<header class="card card-project">',g+='<a href="'+b[c].permalink+'">',g+='<div class="card__img" style="background-image:url('+b[c].image+')"><i class="card__icon"></i><div class="spinner"></div><span class="tag is-inactive">'+b[c].stadeName+"</span></div>",g+='<div class="card__infos"><h1 class="card__title">'+b[c].title+'</h1><p class="p-ss">'+b[c].region+"</p></div>",g+="</a>",g+="</header>",g+='<div class="p-details">',g+='<div class="p-details__nrg"><i class="icon-'+b[c].catSlug+'_100"></i></div>',g+='<ul class="p-details__infos">',g+='<li class="p-details__infos__loca"><strong>'+b[c].city+"</strong><span>"+b[c].region+"</span></li>",g+='<li class="p-details__infos__prod"><strong>'+b[c].equiPui+" "+b[c].typeUnit+"</strong><span>"+b[c].prod+" "+b[c].prodUnit+"</span></li>",g+="</ul>",g+='<p class="p-details__equi p-ss">Produit la consommation annuelle de '+b[c].equiPro+" foyers.</p>",g+="</div>",g+='<a class="link-cta" href="'+b[c].permalink+'"><i class="icon-chevronright_32"></i><span>Voir ce projet</span></a>',g+="</article>",$(".cards-map").append(g),c==nbMakers-1&&windowW>=bpSmall?($(".js-more-procards").parent().remove(),setTimeout(function(){$(".spinner.bg-spin").remove()},300)):1==c&&bpSmall>=windowW&&($(".spinner.bg-spin").remove(),$(".js-more-procards").parent().removeClass("anim-out"))}})}function onClickMarker(a,b,c,d){markerShadow&&markerShadow.setPosition?(markerShadow.setPosition(c.getPosition()),markerShadow.show()):(markerShadow=new MarkerShadow(c.getPosition(),iconShadow,b),markerShadow.show()),isOpenMarker&&(previousMarker.setIcon(iconsProjectsMap[previousNrj]),previousMarker.setZIndex(1)),c.setIcon(iconsSelectProjectsMap[d]),previousMarker=c,previousNrj=d,c.setZIndex(1e4),a!=prevCardMapId&&(isOpenMarker?($(".cards-map .card-map:eq("+prevCardMapId+")").toggleClass("anim-out-left"),setTimeout(function(){$(".cards-map .card-map:eq("+a+")").toggleClass("anim-out-left"),setTimeout(function(){$(".cards-map .card-map:eq("+a+") .spinner").css("opacity",0)},100)},220)):($(".cards-map .card-map:eq("+a+")").toggleClass("anim-out-left"),setTimeout(function(){$(".cards-map .card-map:eq("+a+") .spinner").css("opacity",0),$(".cards-map .card-map:eq("+a+")").removeClass("unactive")},100))),prevCardMapId=a,isOpenMarker=!0}function initFilters(a){$(".first.map-filters button").click(function(b){resetMarkers();var c=$(this);if(filterCat=c.data("filter"),c.hasClass("js-f-active"))c.toggleClass("js-f-active"),resetNrjFilter();else for($(".first.map-filters .js-f-active").toggleClass("js-f-active"),c.addClass("js-f-active"),i=0;i<gmarkers.length;i++)gmarkers[i].category==filterCat||0===filterCat.length?(gmarkers[i].stade==filterStade||"all_cat"==filterStade)&&gmarkers[i].setVisible(!0):gmarkers[i].setVisible(!1);centerMapOnMarkers(a)}),$(".second.map-filters button").click(function(b){resetMarkers();var c=$(this);if(filterStade=c.data("filter"),c.hasClass("js-f-active"))c.toggleClass("js-f-active"),resetStadeFilter();else for($(".second.map-filters .js-f-active").toggleClass("js-f-active"),c.addClass("js-f-active"),i=0;i<gmarkers.length;i++)gmarkers[i].stade==filterStade||0===filterStade.length?(gmarkers[i].category==filterCat||"all_cat"==filterCat)&&gmarkers[i].setVisible(!0):gmarkers[i].setVisible(!1);centerMapOnMarkers(a)})}function resetNrjFilter(){for(i=0;i<gmarkers.length;i++)gmarkers[i].category!=filterCat&&(gmarkers[i].stade==filterStade||"all_cat"==filterStade)&&gmarkers[i].setVisible(!0),i==gmarkers.length-1&&(filterCat="all_cat")}function resetStadeFilter(){for(i=0;i<gmarkers.length;i++)gmarkers[i].stade!=filterStade&&(gmarkers[i].category==filterCat||"all_cat"==filterCat)&&gmarkers[i].setVisible(!0),i==gmarkers.length-1&&(filterStade="all_cat")}function resetMarkers(){isOpenMarker&&(previousMarker.setIcon(iconsProjectsMap[previousNrj]),markerShadow.hide(),isOpenMarker=!1,$(".cards-map .card-map:eq("+prevCardMapId+")").toggleClass("anim-out-left"),prevCardMapId=null)}function centerMapOnMarkers(a){nbShowMakers=nbMakers;var b=new Array,c=new google.maps.LatLngBounds;for(i=0;i<gmarkers.length;i++)gmarkers[i].visible?b.push(gmarkers[i].getPosition()):nbShowMakers--;for(var d=0,e=b.length;e>d;d++)c.extend(b[d]);nbShowMakers>=3?a.fitBounds(c):2==nbShowMakers?(a.setZoom(6),a.setCenter(c.getCenter())):1==nbShowMakers&&(a.setZoom(7),a.setCenter(c.getCenter()))}function removeMarkers(){for(i=0;i<gmarkers.length;i++)gmarkers[i].setMap(null)}function reloadCurrentPage(){bpSmall>=lastWindowW&&windowW>=bpSmall&&1==$(".map-projects").length&&(location.reload(!0),lastWindowW=windowW)}function MarkerShadow(a,b,c){this.posn_=a,this.map_=c,"string"==typeof b?this.image=b:(this.options_=b,b.size&&(this.size_=b.size),b.url&&(this.image_=b.url)),this.div_=null,this.setMap(c)}function initContactForm(){function a(){0==$("#submit.is-sending").length&&$.ajax({url:themeURL+"/app/inc/inc_projet/send_contact.php",type:"POST",data:$("form#contact_ep").serialize(),dataType:"json",beforeSend:function(){$("#submit").addClass("is-sending").html('<i class="spinner"></i>')},success:function(a){"yes"==a.resultForm?($("#submit").remove(),notify('<span class="valid-submit-form">Votre message à bien été envoyé. Merci</span>')):($("#submit").removeClass("is-sending").html("Envoyer"),notify('<span class="error-submit-form">Il semble y avoir un problème dans l\'envoie de votre message. Vérifiez si tous les champs requis sont renseignés puis renvoyez le. Si le problème persiste, veuillez nous contacter.</span>'))},error:function(){$("#submit").removeClass("is-sending"),notify('<span class="error-submit-form">Il semble y avoir un problème dans l\'envoie de votre message. Vérifiez si tous les champs requis sont renseignés puis renvoyez le. Si le problème persiste, veuillez nous contacter.</span>')}})}$("#contact_ep").validate({rules:{email:{email:!0},prenom:{required:!0},nom:{required:!0},sujet:{required:!0},message:{required:!0}},messages:{sujet:{required:"Veuillez sélectionner une réponse"}},submitHandler:function(){a()}})}function sendForm(){0==$("#submit.is-sending").length&&$.ajax({url:themeURL+"/app/inc/inc_projet/soumettre_projet.php",type:"POST",data:$("form#soumettre_projet").serialize(),dataType:"json",beforeSend:function(){$(".btns-form #submit").addClass("is-sending").html('<i class="spinner"></i>')},success:function(a){"yes"==a.resultForm?($(".btns-form #submit").remove(),notify('<span class="valid-submit-form">Merci, votre projet vient a été correctement ajouté. Nous vous contacterons prochainement avant de le faire apparaitre sur notre site internet.</span>')):($(".btns-form #submit").removeClass("is-sending").html("Envoyer"),notify('<span class="error-submit-form">Il semble y avoir un problème dans l\'envoie de votre formulaire. Vérifiez si tous les champs requis sont renseignés puis renvoyez le. Si le problème persiste, veuillez nous contacter.</span>'))},error:function(){$("#submit").removeClass("is-sending").html("Envoyer"),notify('<span class="error-submit-form">Il semble y avoir un problème dans l\'envoie de votre formulaire. Vérifiez si tous les champs requis sont renseignés puis renvoyez le. Si le problème persiste, veuillez nous contacter.</span>')}})}function hideShowForm(){""!=stadeProjet&&0!=stadeProjet&&(2==stadeProjet||3==stadeProjet?($(".item-1-6, .item-1-5, .item-1-4, .item-1-3, .item-2-6").removeClass("hide-item"),disableCleaner()):1==stadeProjet?($(".item-1-6, .item-1-5, .item-1-4, .item-1-3").removeClass("hide-item"),$(".item-2-6").addClass("hide-item"),disableCleaner()):4==stadeProjet?($(".item-1-6, .item-1-5, .item-1-4, .item-2-6").removeClass("hide-item"),$(".item-1-3").addClass("hide-item"),disableCleaner()):5==stadeProjet?($(".item-1-6, .item-1-5, .item-2-6").removeClass("hide-item"),$(".item-1-4, .item-1-3").addClass("hide-item"),disableCleaner()):6==stadeProjet?($(".item-1-6, .item-2-6").removeClass("hide-item"),$(".item-1-5, .item-1-4, .item-1-3").addClass("hide-item"),disableCleaner()):$(".item-1-6, .item-1-5, .item-1-4, .item-1-3, .item-2-6").addClass("hide-item")),12!=typeEnergie?($(".type-eco-energ").addClass("sub-hide-item"),$(".type-non-eco-energ").removeClass("sub-hide-item"),$("#puissance_prevue, #unites_production, #objectif_production").removeClass("hide-item").attr("disabled",!1),$("#objectif_economie").addClass("hide-item").attr("disabled",!0).val("")):($(".type-eco-energ").removeClass("sub-hide-item"),$(".type-non-eco-energ").addClass("sub-hide-item"),$("#puissance_prevue, #unites_production, #objectif_production").addClass("hide-item").attr("disabled",!0).val(""),$("#objectif_economie").removeClass("hide-item").attr("disabled",!1)),14==typeEnergie?$("#source_energie_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#source_energie_detail").addClass("sub-hide-item").attr("disabled",!0).val(""),"Autres"!=$("input[name=connu_comment]:checked").val()?$("#connu_autre").addClass("sub-hide-item").attr("disabled",!0).val(""):$("#connu_autre").removeClass("sub-hide-item").attr("disabled",!1),"Autres"!=$("input[name=collectif]:checked").val()?$("#autre_collectif").addClass("sub-hide-item").attr("disabled",!0).val(""):$("#autre_collectif").removeClass("sub-hide-item").attr("disabled",!1),"Autres"==$("input[name=entite_porteuse]:checked").val()?$("#nom_entite_porteuse").removeClass("sub-hide-item").attr("disabled",!1):$("#nom_entite_porteuse").addClass("sub-hide-item").attr("disabled",!0).val(""),"oui"==$("input[name=actions_sensibilisation]:checked").val()?$("#actions_sensibilisation_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#actions_sensibilisation_detail").addClass("sub-hide-item").attr("disabled",!0).val(""),"oui"==$("input[name=dispositions_securisant]:checked").val()?$("#dispositions_securisant_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#dispositions_securisant_detail").addClass("sub-hide-item").attr("disabled",!0).val(""),"oui"==$("input[name=demande_financement]:checked").val()?($("#montant_financement").removeClass("sub-hide-item").attr("disabled",!1),$("#montant_financement_label").removeClass("sub-hide-item")):($("#montant_financement").addClass("sub-hide-item").attr("disabled",!0).val(""),$("#montant_financement_label").addClass("sub-hide-item"))}function disableCleaner(){$("input:text.hide-item, textarea.hide-item").each(function(a){$(this).attr("disabled",!0),$(this).val("")}),$("input:radio.hide-item").each(function(a){$(this).attr("disabled",!0),$(this).prop("checked",!1)}),$("select.hide-item").each(function(a){$(this).attr("disabled",!0)}),$("input:text, textarea, input:radio, select").not(".hide-item").each(function(a){$(this).attr("disabled",!1)})}function initSendMailPorspect(){$("#mailing_prospect button").attr("disabled",!1),$("body").on("submit","form#mailing_prospect",function(a){return a.preventDefault(),$("#mailing_prospect .button-round i").attr("class","spinner"),$.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:$(this).serialize()+"&action=send_mail_prospect",success:function(a){$("#mailing_prospect .button-round i").attr("class","icon-check_64"),$("#mailing_prospect button").attr("disabled",!0),"error"==a[0].validation&&$("#mailing_prospect button").attr("disabled",!1),$(".notify").html('<span class="'+a[0].validation+'">'+a[0].message+"</span>")},error:function(a,b,c){console.log(a+" :: "+b+" :: "+c)}}),!1})}function initLoadMoreProjectsBtn(){$(".js-more-project").attr("disabled",!1),$(".js-more-project").on("click",function(a){a.preventDefault(),$(".js-more-project").attr("disabled",!0).html('<i class="spinner green"></i>'),loadMoreProjects()})}function loadMoreProjects(){offsetProject+=2,limiteProjectLoading++;var a="offset="+offsetProject+"&action=more_project_ajax";return $.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:a,success:function(a){var b;$.each(a,function(c){var d=$(".trio-card .box .box__half:eq(0)"),e=$(".trio-card .box .box__half:eq(1)"),f='<a class="card card-project anim-out" href="'+a[c].permalink+'"><div class="card__img"><img class="img-reponsive" src="'+a[c].image+'"><i class="card__icon icon-uniE60F"></i></div><div class="card__infos"><h1 class="card__title">'+a[c].title+'</h1><p class="p-ss">'+a[c].region+"</p></div></a>";b=a[c].sourceUrl,c>0?(e.find(".card-project").addClass("anim-out"),setTimeout(function(){e.find(".card-project").remove(),e.append(f),setTimeout(function(){e.find(".card-project").removeClass("anim-out")},50)},220)):(d.find(".card-project").addClass("anim-out"),setTimeout(function(){d.find(".card-project").remove(),d.append(f),setTimeout(function(){d.find(".card-project").removeClass("anim-out")},50)},220))}),2>limiteProjectLoading?$(".js-more-project").attr("disabled",!1).html('<i class="icon-chevronright_64"></i>'):($(".js-more-project").remove(),$(".trio-card .box__fixe").append('<a href="'+b+'" class="button-round grey"><i class="icon-plus_64"></i></a>'))},error:function(a,b,c){$(".js-more-project").attr("disabled",!1).html('<i class="icon-chevronright_64"></i>')}}),!1}function initLoadMoreProjectsCardsBtn(){$(".js-more-procards").attr("disabled",!1),$(".js-more-procards").on("click",function(a){a.preventDefault(),$(".js-more-procards").attr("disabled",!0).html('<i class="spinner"></i>'),loadMoreProjectsCards()})}function loadMoreProjectsCards(){offsetProject+=6;var a=$(".map-projects").data("nbcards"),b="offset="+offsetProject+"&posts_per_page=6&action=more_project_ajax";return $.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:b,success:function(b){$.each(b,function(c){nbloadedCards++;var d=b[c].catSlug.substring(0,5),e='<article class="card-map c-'+d+' anim-out">';e+='<header class="card card-project">',e+='<a href="'+b[c].permalink+'">',e+='<div class="card__img" style="background-image:url('+b[c].image+')"><i class="card__icon"></i><span class="tag is-inactive">'+b[c].stadeName+"</span></div>",e+='<div class="card__infos"><h1 class="card__title">'+b[c].title+'</h1><p class="p-ss">'+b[c].region+"</p></div>",e+="</a>",e+="</header>",e+="</article>",addCardContent("cardmap",e,nbloadedCards-1,c),a-1>nbloadedCards?$(".js-more-procards").attr("disabled",!1).html("Charger plus"):$(".js-more-procards").parent().hide(300)})},error:function(a,b,c){console.log(a+" :: "+b+" :: "+c)}}),!1}function initLoadMorePostsBtn(){$(".js-more").attr("disabled",!1),$(".js-more").on("click",function(a){a.preventDefault(),$(".js-more").attr("disabled",!0);var b=$(this).data("cat");loadPosts(b)})}function loadPosts(a){var b=$(".fluxi-content").data("totalposts"),c="&cat="+a+"&offset="+offsetPost+"&ppp="+ppp+"&action=more_post_ajax";return $.ajax({type:"POST",dataType:"JSON",url:ajax_object.ajax_url,data:c,beforeSend:function(){$(".js-more").html('<i class="spinner"></i>')},success:function(a){var c=$(a);0!=c.length?($(".js-more").attr("disabled",!1),$(".js-more").html("Charger plus"),$.each(a,function(c){var d='<a class="card-news anim-out" href="'+a[c].permalink+'">';d+='<div class="card__img"><img class="img-responsive" src="'+a[c].img+'" alt="'+a[c].title+'"></div>',d+='<div class="card__infos">',d+='<span class="tag is-inactive">'+a[c].date+"</span>",d+='<h1 class="card__title">'+a[c].title+"</h1>",d+="</div>",d+="</a>",addCardContent("posts",d,offsetPost,c),offsetPost++,offsetPost>=b&&$(".js-more").attr("disabled",!0).remove()})):$(".js-more").attr("disabled",!0).remove()},error:function(a,b,c){console.log(a+" :: "+b+" :: "+c)}}),!1}function addCardContent(a,b,c,d){"cardmap"==a?($(".cards-map").append(b),setTimeout(function(){$(".cards-map").find(".card-map:eq("+c+")").removeClass("anim-out")},200*d)):($(".js-inject-news").append(b),setTimeout(function(){$(".card-news:eq("+(c-2)+")").removeClass("anim-out")},200*d))}function pp_nav(){function a(){var a=0;$(".hamburger").hasClass("is-visible")&&(a=50),b=$(".nav__primary").innerWidth()+$(".nav__secondary").width(),navbarPd=2*$(".navbar").css("padding-left").replace("px",""),c=windowW-logoW-buttonsW-navbarPd-a,d=c-b}calc_windowW();var b,c,d;if(a(),nbNavItems>activeItems?$(".hamburger").addClass("is-visible"):($(".hamburger").removeClass("is-visible pp-visible"),$(".pp").removeClass("is-visible")),b>c){if($(".nav__secondary .nav__item").length>0)var e=$(".nav__secondary").children().last();else var e=$(".nav__primary").children().last();ppItemsW.push(e.outerWidth()),e.removeClass("is-active").prependTo(".pp").on("click",clicPPnavItem).off("click",clicNavItem),clicPPnavItem(),activeItems--}else if(ppItemsW.length>0&&d>ppItemsW[ppItemsW.length-1]){var e=$(".pp .nav__item").first();e.first().appendTo($(".nav__primary .nav__item").length==nbNavItemsNav1?".nav__secondary":".nav__primary"),e.removeClass("is-unfold").off("click",clicPPnavItem).on("click",clicNavItem),ppItemsW.pop(),activeItems++}}function toggleSearch(){if($(".navbar").hasClass("is-search")){$(".navbar").removeClass("is-search");for(var a=0;nbNavItems>a;a++)pp_nav()}else $(".navbar").addClass("is-search"),setTimeout(function(){$(".nav__search__input").focus()},1),$(".js-toggle-pp").removeClass("pp-visible"),$(".pp").removeClass("is-visible"),$(".no-pp .is-active").removeClass("is-active"),$(".pp .is-unfold").removeClass("is-unfold")}function clicNavItem(a){$(a.target).hasClass("nav__item__title")&&($(this).hasClass("is-active")?clearMenu():(clearMenu(),$(this).toggleClass("is-active"),$(".pp").removeClass("is-visible"),$(".js-toggle-pp").removeClass("pp-visible"),$(".navbar__id").addClass("is-compact")))}function clicPPnavItem(){$(".pp .is-unfold").removeClass("is-unfold"),$(this).addClass("is-unfold")}function clearMenu(){$(".no-pp .is-active").removeClass("is-active"),$(".pp .is-unfold").removeClass("is-unfold"),$(".navbar").hasClass("stick-top")||$(".navbar__id").removeClass("is-compact")}var siteURL="",isHome=!1,themeURL="/wp-content/themes/energie-partagee-2",resizeEvent=!0,resizeDebouncer=!0,windowH,windowW;calc_window();var lastWindowW=windowW,bpSmall=600,bpMedium=830,bpLarge=1e3,bpXlarge=1200,ppp=12,offsetPost=12,offsetProject=1,limiteProjectLoading=0,nbMakers=0,nbShowMakers=0,nbloadedCards=6,gmarkers=[],activateFilters=!1,filterCat="all_cat",filterStade="all_cat",map,prevCardMapId,previousMarker,previousNrj,isOpenMarker=!1,stylesMapProjects=[{featureType:"landscape.natural.terrain",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"simplified"},{hue:"#0500ff"},{saturation:"-100"},{lightness:"45"}]},{featureType:"water",elementType:"all",stylers:[{hue:"#007bff"},{visibility:"on"},{lightness:"-9"}]}],markerShadow,iconShadow={url:themeURL+"/app/img/marker-shadow.png",size:new google.maps.Size(38,38),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(34,34)},iconsSelectProjectsMap={eolie:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:15,fillColor:"#5ab1bb",fillOpacity:1},bioma:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:15,fillColor:"#83ab00",fillOpacity:1},solai:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:15,fillColor:"#e9af00",fillOpacity:1},micro:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:15,fillColor:"#5268b9",fillOpacity:1},geoth:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:15,fillColor:"#e7511e",fillOpacity:1},econo:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:1,strokeWeight:15,fillColor:"#b7115b",fillOpacity:1}},iconsProjectsMap={eolie:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#5ab1bb",fillOpacity:1},bioma:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#83ab00",fillOpacity:1},solai:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#e9af00",fillOpacity:1},micro:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#5268b9",fillOpacity:1},geoth:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#e7511e",fillOpacity:1},econo:{path:google.maps.SymbolPath.CIRCLE,scale:22,strokeColor:"#ffffff",strokeOpacity:0,strokeWeight:15,fillColor:"#b7115b",fillOpacity:1}},oldOuterWidth=$.fn.outerWidth;$.fn.outerWidth=function(){return oldOuterWidth.apply(this,[!0])},$(window).load(function(){});var FOO={common:{init:function(){for(var a=0;nbNavItems>a;a++)pp_nav();setTimeout(function(){$(".nav").removeClass("is-hidden")},1),initLoadMoreProjectsBtn(),$(".lightvideo").lightGallery()}},home:{init:function(){isHome=!0,$(".key-nums__item__num").each($("body").hasClass("touch")?function(){$(this).html($(this).attr("data-number"))}:function(){var a=($(this).next(),$(this).attr("data-number")),b=a>1e3?3e3:100*a;$(this).jQuerySimpleCounter({start:0,end:a,duration:b})}),$(".no-touch .top-credibility").waypoint(function(){$(this.element).find(".wrap-n").toggleClass("ready-anim")},{offset:"85%"})}},page:{init:function(){$(".fitvids").fitVids(),initLoadMorePostsBtn(),$("body.page-template-page-projets").length&&(initProjectsMap(),initLoadMoreProjectsCardsBtn())}},category:{init:function(){initLoadMorePostsBtn()}},single:{init:function(){$(".fitvids").fitVids(),$("body.single-projets").length&&(initSingleMap(),initSendMailPorspect())}},contact:{init:function(){initContactForm()}},search:{init:function(){if($(".nav__search__input").focus(),void 0!=window.location.href.split("&")[1]){var a=window.location.href.split("&")[1],b=a.substring(4);$("#search-filters #filter option[value="+b+"]").attr("selected","selected")}$("#search-filters").change(function(){var a,b=$("#search-filters #filter option:selected").val();a=$.isNumeric(b)?"cat":"cpt";var c=window.location.href.split("&")[0];location.href=c+"&"+a+"="+b}),calc_windowH(),windowH<$(".footer").offset().top&&($("#search-filters").waypoint(function(){$(this.element).toggleClass("is-fixed")}),$(".footer").waypoint(function(){$("#search-filters").toggleClass("is-fixed")},{offset:"100%"}))}}},UTIL={fire:function(a,b,c){var d=FOO;b=void 0===b?"init":b,""!==a&&d[a]&&"function"==typeof d[a][b]&&d[a][b](c)},loadEvents:function(){UTIL.fire("common"),$.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(a,b){UTIL.fire(b)})}};$(document).ready(UTIL.loadEvents),resizeEvent&&$(window).bind("resize",resize_handler()),resizeDebouncer&&$(window).bind("resize",debouncer(debouncer_handler));var notify=function(a){var b;b=$($("body").hasClass("single-projets")?'<div class="bullet-points bullet-points--white"><span></span></div><p class="notif-form" style="display:none;">'+a+"</p>":'<p class="notif-form" style="display:none;">'+a+"</p>"),$(".notification").append(b),b.slideDown(300,function(){$("body").hasClass("single-projets")||$("body").hasClass("page-id-3224")||window.setTimeout(function(){b.slideUp(300,function(){b.remove()})},1e4)})},popupCenter=function(a,b,c,d){var e=c||640,f=d||320,g=window.screenLeft||window.screenX,h=window.screenTop||window.screenY,i=window.innerWidth||document.documentElement.clientWidth,j=window.innerHeight||document.documentElement.clientHeight,k=g+i/2-e/2,l=h+j/2-f/2,m=window.open(a,b,"scrollbars=yes, width="+e+", height="+f+", top="+l+", left="+k);return m.focus(),!0};$(".js-share").on("click",function(a){a.preventDefault();var b,c=$(this).attr("data-network"),d=$(this).attr("data-url");if("facebook"==c&&(b="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(d),popupCenter(b,"Partager sur Facebook")),"twitter"==c){var e="energiepartagee";b="https://twitter.com/intent/tweet?text="+encodeURIComponent(document.title)+"&via="+e+"&url="+encodeURIComponent(d),popupCenter(b,"Partager sur Twitter")}}),$.fn.jQuerySimpleCounter=function(a){var b=$.extend({start:0,end:100,easing:"swing",duration:400,complete:""},a),c=$(this);$({count:b.start}).animate({count:b.end},{duration:b.duration,easing:b.easing,step:function(){var a=Math.ceil(this.count);c.text(a)},complete:b.complete})},$(".following .cta").click(function(a){$(".wrap-bg.c-main").toggleClass("is-active")}),MarkerShadow.prototype=new google.maps.OverlayView,MarkerShadow.prototype.setPosition=function(a){this.posn_=a,this.draw()},MarkerShadow.prototype.onAdd=function(){if(this.image_){var a=document.createElement("div");a.style.borderStyle="none",a.style.borderWidth="0px",a.style.position="absolute";var b=document.createElement("img");b.src=this.image_,b.style.width=this.options_.size.x+"px",b.style.height=this.options_.size.y+"px",b.style.position="absolute",a.appendChild(b),this.div_=a;var c=this.getPanes();c.overlayShadow.appendChild(a)}},MarkerShadow.prototype.draw=function(){if(this.image_){var a=this.getProjection(),b=a.fromLatLngToDivPixel(this.posn_);if(this.div_){var c=this.div_;this.options_.anchor&&(c.style.left=Math.floor(b.x-this.options_.anchor.x)+"px",c.style.top=Math.floor(b.y-this.options_.anchor.y)+"px"),this.options_.size&&(c.style.width=this.size_.x+"px",c.style.height=this.size_.y+"px")}}},MarkerShadow.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},MarkerShadow.prototype.hide=function(){this.div_&&(this.div_.style.visibility="hidden")},MarkerShadow.prototype.show=function(){this.div_&&(this.div_.style.visibility="visible")},$(".galerie_damier").length&&$(".galerie_damier").lightGallery({thumbnail:!1,thumbMargin:0,thumbContHeight:90}),$("ul.galerie_vignettes").length&&$("ul.galerie_vignettes").lightSlider({gallery:!0,item:1,loop:!1,thumbItem:9,slideMargin:0,enableDrag:!1,adaptiveHeight:!0,currentPagerPosition:"middle",onSliderLoad:function(a){a.lightGallery({selector:".galerie_vignettes .lslide"})}}),$("ul.galerie_slider").length&&$("ul.galerie_slider").lightSlider({gallery:!1,pager:!0,loop:!1,item:1,adaptiveHeight:!0,slideMargin:0,loop:!0}),$(".accordion").length&&$(".accordion .accordion__head").click(function(a){$(this).parent().toggleClass("open").find(".accordion__content").slideToggle()}),$(".lightbox").length&&$(".lightbox").lightGallery({selector:"this"}),$(".main-isogrid").length&&($(".main-isogrid").each(function(a){var b=$(".main-isogrid"),c=b.isotope({itemSelector:".item",layoutMode:"masonry",transitionDuration:"0.5s",hiddenStyle:{opacity:0},visibleStyle:{opacity:1}});$(".button-group-sort").on("click","button",function(){var a=$(this).attr("data-filter");c.isotope({filter:a})})}),$(".main-isogrid a[href$='.pdf'] .icon-doc").addClass("js-icon-pdf"),$(".main-isogrid a[href$='.zip'] .icon-doc, .docs a[href$='.rar'] .icon-doc").addClass("js-icon-zip"),$(".main-isogrid a[href$='.odt'] .icon-doc").addClass("js-icon-odt"),$(".main-isogrid a[href$='.doc'] .icon-doc, .docs a[href$='.docx'] .icon-doc").addClass("js-icon-word"),$(".main-isogrid a[href$='.xls'] .icon-doc, .docs a[href$='.xlsx'] .icon-doc, .main-isogrid a[href$='.xlt'] .icon-doc, .main-isogrid a[href$='.xltx'] .icon-doc").addClass("js-icon-exel"));var typeEnergie,stadeProjet;if($("#soumettre_projet").length>0){var TODAY=new Date(2013,3,20,10,30);$("#mise_en_service").pickadate({monthsFull:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],today:"aujourd'hui",clear:"effacer",formatSubmit:"dd/mm/yy",close:"Fermer"});var messageRadio="Veuillez sélectionner une réponse";$("#soumettre_projet").validate({rules:{email_contact:{required:!0,email:!0},connu_comment:{required:!0},collectif:{required:!0},stade_projet:{required:!0},entite_porteuse:{required:!0},projet_formalise:{required:!0},actions_sensibilisation:{required:!0},dispositions_securisant:{required:!0},montant_financement:{required:!0},projet_visible:{required:!0},code_postal:{required:!0,number:!0},code_postal_contact:{number:!0},tel_1_contact:{required:!0,digits:!0},tel_2_contact:{digits:!0},puissance_prevue:{required:!0,number:!0},unites_production:{required:!0,number:!0},objectif_production:{number:!0},montant_investissement:{required:!0,number:!0},montant_financement:{number:!0,range:[5e4,5e5]},fonds_disponibles:{number:!0},part_endettement:{number:!0,max:100},site_web_projet:{url:!0}},messages:{connu_comment:{required:messageRadio},collectif:{required:messageRadio},stade_projet:{required:messageRadio},entite_porteuse:{required:messageRadio},projet_formalise:{required:messageRadio},actions_sensibilisation:{
required:messageRadio},dispositions_securisant:{required:messageRadio},montant_financement:{required:messageRadio},projet_visible:{required:messageRadio}},submitHandler:function(){sendForm()}}),typeEnergie=$("#source_energie").val(),stadeProjet=$("input[name=stade_projet]").index($("input[name=stade_projet]:checked"))+1,hideShowForm(),$("#source_energie").change(function(){typeEnergie=$(this).val(),14==typeEnergie?$("#source_energie_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#source_energie_detail").addClass("sub-hide-item").attr("disabled",!0).val(""),hideShowForm()}),$("input[name=stade_projet]").change(function(){stadeProjet=$("input[name=stade_projet]").index(this),stadeProjet+=1,hideShowForm()}),$("input[name=connu_comment]").change(function(){"Autres"==$("input[name=connu_comment]:checked").val()?$("#connu_autre").removeClass("sub-hide-item").attr("disabled",!1):$("#connu_autre").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=collectif]").change(function(){"Autres"==$("input[name=collectif]:checked").val()?$("#autre_collectif").removeClass("sub-hide-item").attr("disabled",!1):$("#autre_collectif").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=entite_porteuse]").change(function(){"oui"==$("input[name=entite_porteuse]:checked").val()?$("#nom_entite_porteuse").removeClass("sub-hide-item").attr("disabled",!1):$("#nom_entite_porteuse").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=actions_sensibilisation]").change(function(){"oui"==$("input[name=actions_sensibilisation]:checked").val()?$("#actions_sensibilisation_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#actions_sensibilisation_detail").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=dispositions_securisant]").change(function(){"oui"==$("input[name=dispositions_securisant]:checked").val()?$("#dispositions_securisant_detail").removeClass("sub-hide-item").attr("disabled",!1):$("#dispositions_securisant_detail").addClass("sub-hide-item").attr("disabled",!0).val("")}),$("input[name=demande_financement]").change(function(){"oui"==$("input[name=demande_financement]:checked").val()?($("#montant_financement").removeClass("sub-hide-item").attr("disabled",!1),$("#montant_financement_label").removeClass("sub-hide-item")):($("#montant_financement").addClass("sub-hide-item").attr("disabled",!0).val(""),$("#montant_financement_label").addClass("sub-hide-item"))})}var ppItemsW=new Array,logoW=$(".navbar__id").outerWidth(),buttonsW=$(".navbar__buttons").outerWidth(),nbNavItems=$(".nav__item").length,activeItems=nbNavItems,nbNavItemsNav1=$(".nav__primary .nav__item").length,nbNavItemsNav2=$(".nav__secondary .nav__item").length;$(window).on("resize",function(){pp_nav()}),$(".current_page_item").parent().parent().prev().addClass("is-active"),$(".js-toggle-search").on("click",toggleSearch),$("body").hasClass("touch")&&($(".js-toggle-pp").click(function(){clearMenu(),$(".pp").hasClass("is-visible")||$(".navbar__id").addClass("is-compact"),$(this).toggleClass("pp-visible"),$(".pp").toggleClass("is-visible")}),$(".no-pp .nav__item").on("click",clicNavItem)),$(".top-display").waypoint(function(){$(".navbar, .navbar__id").toggleClass("is-compact")},{offset:"-1px"});